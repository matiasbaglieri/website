!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(c){r=!0,a=c}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{DiK8:function(t,i,a){"use strict";a.d(i,"a",(function(){return f}));var o=a("kmKP"),s=a("dDtM"),c=a("2Vo4"),l=a("LFK6"),m=a("fXoL"),u=a("tk/3"),d=a("5eHb"),p=a("1kSV"),v=a("sYmb"),f=function(){var t=function(){function t(e,i,r,a,o,s){n(this,t),this.http=e,this.userService=i,this.toastr=r,this.modalService=a,this.translateService=o,this.navigationService=s,this.onModuleSettingsUpdated=new c.a(null),this.onModuleSettingsUpdated$=this.onModuleSettingsUpdated.asObservable()}return r(t,[{key:"openModal",value:function(e){this.modalService.open(e,{scrollable:!0}).result.then((function(e){console.log(e)}),(function(e){console.log("Err!",e)}))}},{key:"updateSettings",value:function(t){var n=this;if(console.table(t),t){for(var i="".concat(s.a.settings,"?environment_id=").concat(this.navigationService.activeEnvironment?this.navigationService.activeEnvironment.id:""),r=0,a=Object.entries(t);r<a.length;r++){var o=e(a[r],2),c=o[0],l=o[1];i="".concat(i,"&").concat(c,"=").concat(l)}this.http.put(i,null).subscribe((function(e){n.onModuleSettingsUpdated.next(t),n.modalService.dismissAll(),n.refreshEnvironment(),n.toastr.success(n.translateService.instant("module.settings.update.success"))}),(function(e){n.modalService.dismissAll(),n.toastr.error(n.translateService.instant("module.settings.update.error"))}))}}},{key:"updateNetworkSettings",value:function(t){var n=this;if(t){for(var i={module_assistant:t.menu_config.assistant,a_user:t.assistant.user,a_record:t.assistant.record,module_calendar:t.menu_config.calendar,c_basic:t.calendar.basic,c_advance:t.calendar.advance,module_chat:t.menu_config.chat,chat:t.chat_config.chat,groups:t.chat_config.groups,contacts:t.chat_config.contacts,module_dashboard:t.menu_config.dashboard,module_market:t.menu_config.market,mkt_buy:t.market.buy,mkt_sell:t.market.sell,module_matchmaking:t.menu_config.matchmaking,m_history:t.matchmaking.history,m_pending:t.matchmaking.pending,module_news:t.menu_config.news,mws_story:t.news.story,mws_instant:t.news.instant,module_profile:t.menu_config.profile,module_timetracking:t.menu_config.timetracking,t_new_task:t.timetracking.new_task,t_tasks:t.timetracking.tasks,t_history:t.timetracking.history,t_pomodoro:t.timetracking.pomodoro,module_wallet:t.menu_config.wallet,w_send:t.wallet.send,w_receive:t.wallet.receive,w_history:t.wallet.history},r="".concat(s.a.settings,"?environment_id=").concat(t.id),a=0,o=Object.entries(i);a<o.length;a++){var c=e(o[a],2),l=c[0],m=c[1];r="".concat(r,"&").concat(l,"=").concat(m)}this.http.put(r,null).subscribe((function(e){n.onModuleSettingsUpdated.next(i),n.refreshEnvironment(),n.toastr.success(n.translateService.instant("module.settings.update.success"))}),(function(e){n.modalService.dismissAll(),n.toastr.error(n.translateService.instant("module.settings.update.error"))}))}}},{key:"refreshEnvironment",value:function(){var e=this;this.userService.getUser().subscribe((function(t){t&&200===t.status&&(e.navigationService.activeEnvironment=t.data.environment,e.navigationService.environmentId.next(t.data&&t.data.environment?t.data.environment.id:""))}),(function(e){}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(m["\u0275\u0275inject"](u.b),m["\u0275\u0275inject"](o.a),m["\u0275\u0275inject"](d.b),m["\u0275\u0275inject"](p.k),m["\u0275\u0275inject"](v.d),m["\u0275\u0275inject"](l.a))},t.\u0275prov=m["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},LBGr:function(e,t,i){"use strict";i.r(t),i.d(t,"TimetrackingModule",(function(){return y}));var a=i("ofXK"),o=i("tyNb"),s=i("DiK8"),c=i("LFK6"),l=i("kmKP"),m=i("fXoL"),u=i("3Pt+"),d=i("1kSV"),p=i("sYmb");function v(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",3),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"](),t=m["\u0275\u0275reference"](6);return e.settingsService.openModal(t)})),m["\u0275\u0275pipe"](1,"translate"),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"]()}2&e&&(m["\u0275\u0275propertyInterpolate"]("ngbTooltip",m["\u0275\u0275pipeBind1"](1,2,"updateModuleSettings")),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](3,4,"settings")))}function f(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"form",4),m["\u0275\u0275listener"]("ngSubmit",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]();return e.settingsService.updateSettings(e.settingsForm.value)})),m["\u0275\u0275elementStart"](1,"div",5),m["\u0275\u0275elementStart"](2,"h4",6),m["\u0275\u0275text"](3),m["\u0275\u0275pipe"](4,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"button",7),m["\u0275\u0275listener"]("click",(function(){return t.$implicit.dismiss("Cross click")})),m["\u0275\u0275elementStart"](6,"span",8),m["\u0275\u0275text"](7,"\xd7"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"div",9),m["\u0275\u0275elementStart"](9,"div",10),m["\u0275\u0275elementStart"](10,"label",11),m["\u0275\u0275element"](11,"input",12),m["\u0275\u0275element"](12,"span",13),m["\u0275\u0275elementStart"](13,"span"),m["\u0275\u0275text"](14),m["\u0275\u0275pipe"](15,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"label",11),m["\u0275\u0275element"](17,"input",14),m["\u0275\u0275element"](18,"span",13),m["\u0275\u0275elementStart"](19,"span"),m["\u0275\u0275text"](20),m["\u0275\u0275pipe"](21,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"label",11),m["\u0275\u0275element"](23,"input",15),m["\u0275\u0275element"](24,"span",13),m["\u0275\u0275elementStart"](25,"span"),m["\u0275\u0275text"](26),m["\u0275\u0275pipe"](27,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](28,"label",11),m["\u0275\u0275element"](29,"input",16),m["\u0275\u0275element"](30,"span",13),m["\u0275\u0275elementStart"](31,"span"),m["\u0275\u0275text"](32),m["\u0275\u0275pipe"](33,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](34,"label",11),m["\u0275\u0275element"](35,"input",17),m["\u0275\u0275element"](36,"span",13),m["\u0275\u0275elementStart"](37,"span"),m["\u0275\u0275text"](38),m["\u0275\u0275pipe"](39,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](40,"div",18),m["\u0275\u0275elementStart"](41,"button",19),m["\u0275\u0275listener"]("click",(function(){return t.$implicit.dismiss("Cross click")})),m["\u0275\u0275text"](42),m["\u0275\u0275pipe"](43,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](44,"button",20),m["\u0275\u0275text"](45),m["\u0275\u0275pipe"](46,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275nextContext"]();m["\u0275\u0275property"]("formGroup",i.settingsForm),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](4,9,"moduleSettings")),m["\u0275\u0275advance"](11),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](15,11,"moduleTimetracking")),m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](21,13,"newTask")),m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](27,15,"tasks")),m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](33,17,"history")),m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](39,19,"pomodoro")),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](43,21,"cancel")),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](46,23,"update"))}}var g,b,h,S=[{path:"",component:(g=function(){function e(t,i,r,a){n(this,e),this.settingsService=t,this.userService=i,this.navigationService=r,this.formBuilder=a}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.environmentIdSub=this.navigationService.environmentId$.subscribe((function(t){t?(e.showSettings=!0,e.initiateSettings()):e.userService.getUser().subscribe((function(t){t&&t.data&&t.data.environment&&(e.showSettings=!0,e.navigationService.activeEnvironment=t.data.environment,e.initiateSettings())}))}))}},{key:"ngOnDestroy",value:function(){this.environmentIdSub&&this.environmentIdSub.unsubscribe(),this.moduleSettingsUpdatedSub&&this.moduleSettingsUpdatedSub.unsubscribe()}},{key:"initiateSettings",value:function(){var e=this.navigationService.activeEnvironment;if(e){var t=e.timetracking;this.settingsForm=this.formBuilder.group({module_timetracking:[e.menu_config.timetracking],t_new_task:[t.new_task],t_tasks:[t.tasks],t_history:[t.history],t_pomodoro:[t.pomodoro]})}}}]),e}(),g.\u0275fac=function(e){return new(e||g)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](l.a),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](u.FormBuilder))},g.\u0275cmp=m["\u0275\u0275defineComponent"]({type:g,selectors:[["app-timetracking"]],decls:7,vars:4,consts:[[1,"breadcrumb","market-header"],["class","btn btn-rounded btn-primary mr-3 ml-auto","placement","bottom",3,"ngbTooltip","click",4,"ngIf"],["timeTrackSettingsModal",""],["placement","bottom",1,"btn","btn-rounded","btn-primary","mr-3","ml-auto",3,"ngbTooltip","click"],[3,"formGroup","ngSubmit"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"px-5"],[1,"switch","switch-primary","col-12","mb-4"],["type","checkbox","formControlName","module_timetracking"],[1,"slider"],["type","checkbox","formControlName","t_new_task"],["type","checkbox","formControlName","t_tasks"],["type","checkbox","formControlName","t_history"],["type","checkbox","formControlName","t_pomodoro"],[1,"modal-footer"],["type","submit",1,"btn","btn-outline-dark","btn-rounded",3,"click"],["type","submit",1,"btn","btn-outline-primary","btn-rounded"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"h1"),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](4,v,4,6,"button",1),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](5,f,47,25,"ng-template",null,2,m["\u0275\u0275templateRefExtractor"])),2&e&&(m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](3,2,"timeTracking")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.navigationService.showSettings&&t.showSettings))},directives:[a.p,d.y,u["\u0275angular_packages_forms_forms_y"],u.NgControlStatusGroup,u.FormGroupDirective,u.CheckboxControlValueAccessor,u.NgControlStatus,u.FormControlName],pipes:[p.c],styles:[""]}),g)}],k=((h=function e(){n(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:h}),h.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||h)},imports:[[o.l.forChild(S)],o.l]}),h),y=((b=function e(){n(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:b}),b.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||b)},imports:[[a.c,k,d.z,p.b,u.ReactiveFormsModule]]}),b)}}])}();