!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(c){i=!0,r=c}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{DiK8:function(t,a,r){"use strict";r.d(a,"a",(function(){return f}));var o=r("kmKP"),s=r("dDtM"),c=r("2Vo4"),l=r("LFK6"),d=r("fXoL"),u=r("tk/3"),v=r("5eHb"),m=r("1kSV"),h=r("sYmb"),f=function(){var t=function(){function t(e,a,i,r,o,s){n(this,t),this.http=e,this.userService=a,this.toastr=i,this.modalService=r,this.translateService=o,this.navigationService=s,this.onModuleSettingsUpdated=new c.a(null),this.onModuleSettingsUpdated$=this.onModuleSettingsUpdated.asObservable()}return i(t,[{key:"openModal",value:function(e){this.modalService.open(e,{scrollable:!0}).result.then((function(e){console.log(e)}),(function(e){console.log("Err!",e)}))}},{key:"updateSettings",value:function(t){var n=this;if(console.table(t),t){for(var a="".concat(s.a.settings,"?environment_id=").concat(this.navigationService.activeEnvironment?this.navigationService.activeEnvironment.id:""),i=0,r=Object.entries(t);i<r.length;i++){var o=e(r[i],2),c=o[0],l=o[1];a="".concat(a,"&").concat(c,"=").concat(l)}this.http.put(a,null).subscribe((function(e){n.onModuleSettingsUpdated.next(t),n.modalService.dismissAll(),n.refreshEnvironment(),n.toastr.success(n.translateService.instant("module.settings.update.success"))}),(function(e){n.modalService.dismissAll(),n.toastr.error(n.translateService.instant("module.settings.update.error"))}))}}},{key:"updateNetworkSettings",value:function(t){var n=this;if(t){for(var a={module_assistant:t.menu_config.assistant,a_user:t.assistant.user,a_record:t.assistant.record,module_calendar:t.menu_config.calendar,c_basic:t.calendar.basic,c_advance:t.calendar.advance,module_chat:t.menu_config.chat,chat:t.chat_config.chat,groups:t.chat_config.groups,contacts:t.chat_config.contacts,module_dashboard:t.menu_config.dashboard,module_market:t.menu_config.market,mkt_buy:t.market.buy,mkt_sell:t.market.sell,module_matchmaking:t.menu_config.matchmaking,m_history:t.matchmaking.history,m_pending:t.matchmaking.pending,module_news:t.menu_config.news,mws_story:t.news.story,mws_instant:t.news.instant,module_profile:t.menu_config.profile,module_timetracking:t.menu_config.timetracking,t_new_task:t.timetracking.new_task,t_tasks:t.timetracking.tasks,t_history:t.timetracking.history,t_pomodoro:t.timetracking.pomodoro,module_wallet:t.menu_config.wallet,w_send:t.wallet.send,w_receive:t.wallet.receive,w_history:t.wallet.history},i="".concat(s.a.settings,"?environment_id=").concat(t.id),r=0,o=Object.entries(a);r<o.length;r++){var c=e(o[r],2),l=c[0],d=c[1];i="".concat(i,"&").concat(l,"=").concat(d)}this.http.put(i,null).subscribe((function(e){n.onModuleSettingsUpdated.next(a),n.refreshEnvironment(),n.toastr.success(n.translateService.instant("module.settings.update.success"))}),(function(e){n.modalService.dismissAll(),n.toastr.error(n.translateService.instant("module.settings.update.error"))}))}}},{key:"refreshEnvironment",value:function(){var e=this;this.userService.getUser().subscribe((function(t){t&&200===t.status&&(e.navigationService.activeEnvironment=t.data.environment,e.navigationService.environmentId.next(t.data&&t.data.environment?t.data.environment.id:""))}),(function(e){}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d["\u0275\u0275inject"](u.b),d["\u0275\u0275inject"](o.a),d["\u0275\u0275inject"](v.b),d["\u0275\u0275inject"](m.k),d["\u0275\u0275inject"](h.d),d["\u0275\u0275inject"](l.a))},t.\u0275prov=d["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},TwXb:function(e,t,a){"use strict";a.r(t),a.d(t,"CalendarAppModule",(function(){return H}));var r,o,s=a("ofXK"),c=a("kRoH"),l=a("1BeU"),d=a("fXoL"),u=function e(t,a,i,r){n(this,e),this.r=t,this.g=a,this.b=i,this.a=r},v=function e(t,a,i,r){n(this,e),this.h=t,this.s=a,this.v=i,this.a=r},m=function e(t,a,i,r){n(this,e),this.h=t,this.s=a,this.l=i,this.a=r},h=function e(t,a,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;n(this,e),this.c=t,this.m=a,this.y=i,this.k=r,this.a=o},f=((o=function(){function e(){n(this,e),this.active=null}return i(e,[{key:"setActive",value:function(e){this.active&&this.active!==e&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=e}},{key:"hsva2hsla",value:function(e){var t=e.h,n=e.s,a=e.v,i=e.a;if(0===a)return new m(t,0,0,i);if(0===n&&1===a)return new m(t,1,1,i);var r=a*(2-n)/2;return new m(t,a*n/(1-Math.abs(2*r-1)),r,i)}},{key:"hsla2hsva",value:function(e){var t=Math.min(e.h,1),n=Math.min(e.s,1),a=Math.min(e.l,1),i=Math.min(e.a,1);if(0===a)return new v(t,0,0,i);var r=a+n*(1-Math.abs(2*a-1))/2;return new v(t,2*(r-a)/r,r,i)}},{key:"hsvaToRgba",value:function(e){var t,n,a,i=e.h,r=e.s,o=e.v,s=e.a,c=Math.floor(6*i),l=6*i-c,d=o*(1-r),v=o*(1-l*r),m=o*(1-(1-l)*r);switch(c%6){case 0:t=o,n=m,a=d;break;case 1:t=v,n=o,a=d;break;case 2:t=d,n=o,a=m;break;case 3:t=d,n=v,a=o;break;case 4:t=m,n=d,a=o;break;case 5:t=o,n=d,a=v;break;default:t=0,n=0,a=0}return new u(t,n,a,s)}},{key:"cmykToRgb",value:function(e){return new u((1-e.c)*(1-e.k),(1-e.m)*(1-e.k),(1-e.y)*(1-e.k),e.a)}},{key:"rgbaToCmyk",value:function(e){var t=1-Math.max(e.r,e.g,e.b);return 1===t?new h(0,0,0,1,e.a):new h((1-e.r-t)/(1-t),(1-e.g-t)/(1-t),(1-e.b-t)/(1-t),t,e.a)}},{key:"rgbaToHsva",value:function(e){var t,n,a=Math.min(e.r,1),i=Math.min(e.g,1),r=Math.min(e.b,1),o=Math.min(e.a,1),s=Math.max(a,i,r),c=Math.min(a,i,r),l=s,d=s-c;if(n=0===s?0:d/s,s===c)t=0;else{switch(s){case a:t=(i-r)/d+(i<r?6:0);break;case i:t=(r-a)/d+2;break;case r:t=(a-i)/d+4;break;default:t=0}t/=6}return new v(t,n,l,o)}},{key:"rgbaToHex",value:function(e,t){var n="#"+(1<<24|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return t&&(n+=(256|Math.round(255*e.a)).toString(16).substr(1)),n}},{key:"normalizeCMYK",value:function(e){return new h(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}},{key:"denormalizeCMYK",value:function(e){return new h(Math.floor(100*e.c),Math.floor(100*e.m),Math.floor(100*e.y),Math.floor(100*e.k),e.a)}},{key:"denormalizeRGBA",value:function(e){return new u(Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b),e.a)}},{key:"stringToHsva",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;e=(e||"").toLowerCase();var a=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new u(parseInt(e[2],10)/255,parseInt(e[3],10)/255,parseInt(e[4],10)/255,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new m(parseInt(e[2],10)/360,parseInt(e[3],10)/100,parseInt(e[4],10)/100,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}}];for(var i in a.push(t?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(e){return new u(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,parseInt(e[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(e){return new u(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,1)}}),a.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(e){return new u(parseInt(e[1]+e[1],16)/255,parseInt(e[2]+e[2],16)/255,parseInt(e[3]+e[3],16)/255,1)}}),a)if(a.hasOwnProperty(i)){var r=a[i],o=r.re.exec(e),s=o&&r.parse(o);if(s)return s instanceof u?n=this.rgbaToHsva(s):s instanceof m&&(n=this.hsla2hsva(s)),n}return n}},{key:"outputFormat",value:function(e,t,n){switch("auto"===t&&(t=e.a<1?"rgba":"hex"),t){case"hsla":var a=this.hsva2hsla(e),i=new m(Math.round(360*a.h),Math.round(100*a.s),Math.round(100*a.l),Math.round(100*a.a)/100);return e.a<1||"always"===n?"hsla("+i.h+","+i.s+"%,"+i.l+"%,"+i.a+")":"hsl("+i.h+","+i.s+"%,"+i.l+"%)";case"rgba":var r=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||"always"===n?"rgba("+r.r+","+r.g+","+r.b+","+Math.round(100*r.a)/100+")":"rgb("+r.r+","+r.g+","+r.b+")";default:var o="always"===n||"forced"===n;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),o)}}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275prov=d["\u0275\u0275defineInjectable"]({token:o,factory:o.\u0275fac}),o),p=((r=function e(){n(this,e)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||r)},providers:[f],imports:[[s.c]]}),r),b=a("tyNb"),g=a("XNiG"),w=a("WIjQ"),y=a("G6Tw"),k=a("PI+e"),S=a("+GWT"),C=a("wJGF"),E=a("9uVP"),x=a("rXAn"),D=a("DiK8"),I=a("LFK6"),_=a("kmKP"),M=a("1kSV"),T=a("3Pt+"),j=a("sYmb"),A=["eventDeleteConfirm"];function F(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"button",28),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"](),t=d["\u0275\u0275reference"](33);return e.settingsService.openModal(t)})),d["\u0275\u0275pipe"](1,"translate"),d["\u0275\u0275text"](2),d["\u0275\u0275pipe"](3,"translate"),d["\u0275\u0275elementEnd"]()}2&e&&(d["\u0275\u0275propertyInterpolate"]("ngbTooltip",d["\u0275\u0275pipeBind1"](1,2,"updateModuleSettings")),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](3,4,"settings")))}function V(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"mwl-calendar-month-view",29),d["\u0275\u0275listener"]("dayClicked",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().dayClicked(e.day)}))("eventClicked",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().handleEvent("edit",e.event)}))("eventTimesChanged",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().eventTimesChanged(e)})),d["\u0275\u0275elementEnd"]()}if(2&e){var a=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("viewDate",a.viewDate)("events",a.events)("refresh",a.refresh)("activeDayIsOpen",a.activeDayIsOpen)}}function O(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"mwl-calendar-week-view",30),d["\u0275\u0275listener"]("eventClicked",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().handleEvent("edit",e.event)}))("eventTimesChanged",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().eventTimesChanged(e)})),d["\u0275\u0275elementEnd"]()}if(2&e){var a=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("viewDate",a.viewDate)("events",a.events)("refresh",a.refresh)}}function N(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"mwl-calendar-day-view",30),d["\u0275\u0275listener"]("eventClicked",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().handleEvent("edit",e.event)}))("eventTimesChanged",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().eventTimesChanged(e)})),d["\u0275\u0275elementEnd"]()}if(2&e){var a=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("viewDate",a.viewDate)("events",a.events)("refresh",a.refresh)}}function B(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",31),d["\u0275\u0275elementStart"](1,"h4",32),d["\u0275\u0275text"](2,"Delete Event?"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"button",33),d["\u0275\u0275listener"]("click",(function(){return t.$implicit.dismiss("Cross click")})),d["\u0275\u0275elementStart"](4,"span",34),d["\u0275\u0275text"](5,"\xd7"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"div",35),d["\u0275\u0275elementStart"](7,"button",36),d["\u0275\u0275listener"]("click",(function(){return t.$implicit.dismiss("cancel")})),d["\u0275\u0275text"](8,"No"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"button",37),d["\u0275\u0275listener"]("click",(function(){return t.$implicit.close("Ok")})),d["\u0275\u0275text"](10,"Yes"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]())}function R(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"form",38),d["\u0275\u0275listener"]("ngSubmit",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275nextContext"]();return e.settingsService.updateSettings(e.settingsForm.value)})),d["\u0275\u0275elementStart"](1,"div",31),d["\u0275\u0275elementStart"](2,"h4",39),d["\u0275\u0275text"](3),d["\u0275\u0275pipe"](4,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"button",40),d["\u0275\u0275listener"]("click",(function(){return t.$implicit.dismiss("Cross click")})),d["\u0275\u0275elementStart"](6,"span",34),d["\u0275\u0275text"](7,"\xd7"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"div",41),d["\u0275\u0275elementStart"](9,"div",42),d["\u0275\u0275elementStart"](10,"label",43),d["\u0275\u0275element"](11,"input",44),d["\u0275\u0275element"](12,"span",45),d["\u0275\u0275elementStart"](13,"span"),d["\u0275\u0275text"](14),d["\u0275\u0275pipe"](15,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](16,"label",43),d["\u0275\u0275element"](17,"input",46),d["\u0275\u0275element"](18,"span",45),d["\u0275\u0275elementStart"](19,"span"),d["\u0275\u0275text"](20),d["\u0275\u0275pipe"](21,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](22,"label",43),d["\u0275\u0275element"](23,"input",47),d["\u0275\u0275element"](24,"span",45),d["\u0275\u0275elementStart"](25,"span"),d["\u0275\u0275text"](26),d["\u0275\u0275pipe"](27,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](28,"div",35),d["\u0275\u0275elementStart"](29,"button",48),d["\u0275\u0275listener"]("click",(function(){return t.$implicit.dismiss("Cross click")})),d["\u0275\u0275text"](30),d["\u0275\u0275pipe"](31,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](32,"button",49),d["\u0275\u0275text"](33),d["\u0275\u0275pipe"](34,"translate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){var a=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("formGroup",a.settingsForm),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](4,7,"moduleSettings")),d["\u0275\u0275advance"](11),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](15,9,"moduleCalendar")),d["\u0275\u0275advance"](6),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](21,11,"basic")),d["\u0275\u0275advance"](6),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](27,13,"advance")),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](31,15,"cancel")),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](34,17,"update"))}}var G,P,U,$=[{path:"",component:(G=function(){function e(t,a,i,r,o,s){var c=this;n(this,e),this.modalService=t,this.calendarService=a,this.settingsService=i,this.userService=r,this.navigationService=o,this.formBuilder=s,this.view="month",this.viewDate=new Date,this.activeDayIsOpen=!0,this.refresh=new g.a,this.actions=[{label:'<i class="i-Edit m-1 text-secondary"></i>',onClick:function(e){var t=e.event;c.handleEvent("edit",t)}},{label:'<i class="i-Close m-1 text-danger"></i>',onClick:function(e){var t=e.event;c.removeEvent(t)}}]}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.environmentIdSub=this.navigationService.environmentId$.subscribe((function(t){t?(e.showSettings=!0,e.initiateSettings(),e.loadEvents()):e.userService.getUser().subscribe((function(t){t&&t.data&&t.data.environment&&(e.showSettings=!0,e.navigationService.activeEnvironment=t.data.environment,e.initiateSettings(),e.loadEvents())}))}))}},{key:"ngOnDestroy",value:function(){this.environmentIdSub&&this.environmentIdSub.unsubscribe(),this.moduleSettingsUpdatedSub&&this.moduleSettingsUpdatedSub.unsubscribe()}},{key:"initEvents",value:function(e){var t=this;return e.map((function(e){return e.actions=t.actions,new k.a(e)}))}},{key:"loadEvents",value:function(){var e=this;this.calendarService.getEvents().subscribe((function(t){e.events=e.initEvents(t)}))}},{key:"removeEvent",value:function(e){var t=this;this.modalService.open(this.eventDeleteConfirm,{ariaLabelledBy:"modal-basic-title",centered:!0}).result.then((function(n){t.calendarService.deleteEvent(e._id).subscribe((function(e){t.events=t.initEvents(e),t.refresh.next()}))}),(function(e){}))}},{key:"addEvent",value:function(){var e=this,t=this.modalService.open(C.a,{centered:!0});t.componentInstance.data={action:"add",date:new Date},t.result.then((function(t){if(t){var n=t.event;n.start=E.a.ngbDateToDate(n.start),n.end=E.a.ngbDateToDate(n.end),e.calendarService.addEvent(n).subscribe((function(t){e.events=e.initEvents(t),e.refresh.next(!0),console.log(e.events)}))}})).catch((function(e){console.log(e)}))}},{key:"handleEvent",value:function(e,t){var n=this,a=this.modalService.open(C.a,{centered:!0});a.componentInstance.data={event:t,action:e},a.result.then((function(e){if(e){var a=e.action,i=e.event;i.start=E.a.ngbDateToDate(i.start),i.end=E.a.ngbDateToDate(i.end),console.log(e),"save"===a?n.calendarService.updateEvent(i).subscribe((function(e){n.events=n.initEvents(e),n.refresh.next(),console.log(n.events)})):"delete"===a&&n.removeEvent(t)}})).catch((function(e){console.log(e)}))}},{key:"dayClicked",value:function(e){var t=e.date,n=e.events;Object(w.a)(t,this.viewDate)&&(Object(y.a)(this.viewDate,t)&&!0===this.activeDayIsOpen||0===n.length?this.activeDayIsOpen=!1:(this.activeDayIsOpen=!0,this.viewDate=t))}},{key:"eventTimesChanged",value:function(e){var t=this,n=e.event,a=e.newStart,i=e.newEnd;n.start=a,n.end=i,this.calendarService.updateEvent(n).subscribe((function(e){t.events=t.initEvents(e),t.refresh.next()}))}},{key:"initiateSettings",value:function(){var e=this.navigationService.activeEnvironment;if(e){var t=e.calendar;this.settingsForm=this.formBuilder.group({module_calendar:[e.menu_config.calendar],c_basic:[t.basic],c_advance:[t.advance]})}}}]),e}(),G.\u0275fac=function(e){return new(e||G)(d["\u0275\u0275directiveInject"](M.k),d["\u0275\u0275directiveInject"](S.a),d["\u0275\u0275directiveInject"](D.a),d["\u0275\u0275directiveInject"](_.a),d["\u0275\u0275directiveInject"](I.a),d["\u0275\u0275directiveInject"](T.FormBuilder))},G.\u0275cmp=d["\u0275\u0275defineComponent"]({type:G,selectors:[["app-calendar"]],viewQuery:function(e,t){var n;1&e&&d["\u0275\u0275staticViewQuery"](A,!0),2&e&&d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.eventDeleteConfirm=n.first)},decls:34,vars:21,consts:[[1,"mb-4","d-flex","justify-content-between"],[1,"btn","btn-rounded","btn-primary",3,"click"],["class","btn btn-rounded btn-primary mr-3","placement","bottom",3,"ngbTooltip","click",4,"ngIf"],[1,"card"],[1,""],[1,"p-3","d-flex","justify-content-between","align-items-center","calendar-title"],[1,"cal-top-col","text-center"],["mwlCalendarPreviousView","",1,"btn","btn-rounded","btn-icon","btn-outline-primary","m-1",3,"view","viewDate","viewDateChange"],[1,"i-Arrow-Left"],["mwlCalendarToday","",1,"btn","btn-rounded","btn-icon","btn-primary","m-1",3,"viewDate","viewDateChange"],[1,"i-Calendar-2"],["mwlCalendarNextView","",1,"btn","btn-rounded","btn-icon","btn-outline-primary","m-1",3,"view","viewDate","viewDateChange"],[1,"i-Arrow-Right"],[1,"text-center"],[1,"m-0","text-muted","font-weight-bold"],[1,"d-flex","justify-content-center"],["ngbTooltip","Month view",1,"btn","btn-rounded","btn-icon","btn-primary","m-1",3,"click"],[1,"i-Calendar"],["ngbTooltip","Week view",1,"btn","btn-rounded","btn-icon","btn-primary","m-1",3,"click"],[1,"i-Split-Vertical-2"],["ngbTooltip","Day view",1,"btn","btn-rounded","btn-icon","btn-primary","m-1",3,"click"],[1,"i-Align-Justify-All"],[1,"p-0"],[3,"ngSwitch"],[3,"viewDate","events","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged",4,"ngSwitchCase"],[3,"viewDate","events","refresh","eventClicked","eventTimesChanged",4,"ngSwitchCase"],["eventDeleteConfirm",""],["calendarSettingsModal",""],["placement","bottom",1,"btn","btn-rounded","btn-primary","mr-3",3,"ngbTooltip","click"],[3,"viewDate","events","refresh","activeDayIsOpen","dayClicked","eventClicked","eventTimesChanged"],[3,"viewDate","events","refresh","eventClicked","eventTimesChanged"],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-footer"],["type","button",1,"btn","btn-rounded","btn-outline-secondary",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-rounded","btn-danger",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"modal-body"],[1,"px-5"],[1,"switch","switch-primary","col-12","mb-4"],["type","checkbox","formControlName","module_calendar"],[1,"slider"],["type","checkbox","formControlName","c_basic"],["type","checkbox","formControlName","c_advance"],["type","submit",1,"btn","btn-outline-dark","btn-rounded",3,"click"],["type","submit",1,"btn","btn-outline-primary","btn-rounded"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275elementStart"](1,"button",1),d["\u0275\u0275listener"]("click",(function(){return t.addEvent()})),d["\u0275\u0275text"](2,"Add Event"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](3,F,4,6,"button",2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"div",3),d["\u0275\u0275elementStart"](5,"div",4),d["\u0275\u0275elementStart"](6,"div",5),d["\u0275\u0275elementStart"](7,"div",6),d["\u0275\u0275elementStart"](8,"button",7),d["\u0275\u0275listener"]("viewDateChange",(function(e){return t.viewDate=e})),d["\u0275\u0275element"](9,"i",8),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"button",9),d["\u0275\u0275listener"]("viewDateChange",(function(e){return t.viewDate=e})),d["\u0275\u0275element"](11,"i",10),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"button",11),d["\u0275\u0275listener"]("viewDateChange",(function(e){return t.viewDate=e})),d["\u0275\u0275element"](13,"i",12),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](14,"div",13),d["\u0275\u0275elementStart"](15,"h5",14),d["\u0275\u0275text"](16),d["\u0275\u0275pipe"](17,"calendarDate"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](18,"div",15),d["\u0275\u0275elementStart"](19,"button",16),d["\u0275\u0275listener"]("click",(function(){return t.view="month"})),d["\u0275\u0275element"](20,"i",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"button",18),d["\u0275\u0275listener"]("click",(function(){return t.view="week"})),d["\u0275\u0275element"](22,"i",19),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](23,"button",20),d["\u0275\u0275listener"]("click",(function(){return t.view="day"})),d["\u0275\u0275element"](24,"i",21),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](25,"div",22),d["\u0275\u0275elementStart"](26,"div",23),d["\u0275\u0275template"](27,V,1,4,"mwl-calendar-month-view",24),d["\u0275\u0275template"](28,O,1,3,"mwl-calendar-week-view",25),d["\u0275\u0275template"](29,N,1,3,"mwl-calendar-day-view",25),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](30,B,11,0,"ng-template",null,26,d["\u0275\u0275templateRefExtractor"]),d["\u0275\u0275template"](32,R,35,19,"ng-template",null,27,d["\u0275\u0275templateRefExtractor"])),2&e&&(d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",t.navigationService.showSettings&&t.showSettings),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("view",t.view)("viewDate",t.viewDate),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("viewDate",t.viewDate),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("view",t.view)("viewDate",t.viewDate),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind3"](17,17,t.viewDate,t.view+"ViewTitle","en")),d["\u0275\u0275advance"](3),d["\u0275\u0275classProp"]("active","month"===t.view),d["\u0275\u0275advance"](2),d["\u0275\u0275classProp"]("active","week"===t.view),d["\u0275\u0275advance"](2),d["\u0275\u0275classProp"]("active","day"===t.view),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngSwitch",t.view),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","month"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","week"),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngSwitchCase","day"))},directives:[s.p,c.f,c.h,c.g,M.y,s.r,s.s,c.c,c.d,c.a,T["\u0275angular_packages_forms_forms_y"],T.NgControlStatusGroup,T.FormGroupDirective,T.CheckboxControlValueAccessor,T.NgControlStatus,T.FormControlName],pipes:[c.i,j.c],styles:[""],data:{animation:[x.a]}}),G)}],K=((U=function e(){n(this,e)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:U}),U.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||U)},imports:[[b.l.forChild($)],b.l]}),U),H=((P=function e(){n(this,e)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:P}),P.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||P)},imports:[[s.c,T.ReactiveFormsModule,M.l,p,c.b.forRoot({provide:c.e,useFactory:l.adapterFactory}),K,j.b]]}),P)}}])}();