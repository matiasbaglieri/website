(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{DiK8:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("kmKP"),r=n("dDtM"),a=n("2Vo4"),s=n("LFK6"),o=n("fXoL"),l=n("tk/3"),c=n("5eHb"),m=n("1kSV"),d=n("sYmb");let p=(()=>{class e{constructor(e,t,n,i,r,s){this.http=e,this.userService=t,this.toastr=n,this.modalService=i,this.translateService=r,this.navigationService=s,this.onModuleSettingsUpdated=new a.a(null),this.onModuleSettingsUpdated$=this.onModuleSettingsUpdated.asObservable()}openModal(e){this.modalService.open(e,{scrollable:!0}).result.then(e=>{console.log(e)},e=>{console.log("Err!",e)})}updateSettings(e){if(console.table(e),!e)return;let t=`${r.a.settings}?environment_id=${this.navigationService.activeEnvironment?this.navigationService.activeEnvironment.id:""}`;for(const[n,i]of Object.entries(e))t=`${t}&${n}=${i}`;this.http.put(t,null).subscribe(t=>{this.onModuleSettingsUpdated.next(e),this.modalService.dismissAll(),this.refreshEnvironment(),this.toastr.success(this.translateService.instant("module.settings.update.success"))},e=>{this.modalService.dismissAll(),this.toastr.error(this.translateService.instant("module.settings.update.error"))})}updateNetworkSettings(e){if(!e)return;const t={module_assistant:e.menu_config.assistant,a_user:e.assistant.user,a_record:e.assistant.record,module_calendar:e.menu_config.calendar,c_basic:e.calendar.basic,c_advance:e.calendar.advance,module_chat:e.menu_config.chat,chat:e.chat_config.chat,groups:e.chat_config.groups,contacts:e.chat_config.contacts,module_dashboard:e.menu_config.dashboard,module_market:e.menu_config.market,mkt_buy:e.market.buy,mkt_sell:e.market.sell,module_matchmaking:e.menu_config.matchmaking,m_history:e.matchmaking.history,m_pending:e.matchmaking.pending,module_news:e.menu_config.news,mws_story:e.news.story,mws_instant:e.news.instant,module_profile:e.menu_config.profile,module_timetracking:e.menu_config.timetracking,t_new_task:e.timetracking.new_task,t_tasks:e.timetracking.tasks,t_history:e.timetracking.history,t_pomodoro:e.timetracking.pomodoro,module_wallet:e.menu_config.wallet,w_send:e.wallet.send,w_receive:e.wallet.receive,w_history:e.wallet.history};let n=`${r.a.settings}?environment_id=${e.id}`;for(const[i,r]of Object.entries(t))n=`${n}&${i}=${r}`;this.http.put(n,null).subscribe(e=>{this.onModuleSettingsUpdated.next(t),this.refreshEnvironment(),this.toastr.success(this.translateService.instant("module.settings.update.success"))},e=>{this.modalService.dismissAll(),this.toastr.error(this.translateService.instant("module.settings.update.error"))})}refreshEnvironment(){this.userService.getUser().subscribe(e=>{e&&200===e.status&&(this.navigationService.activeEnvironment=e.data.environment,this.navigationService.environmentId.next(e.data&&e.data.environment?e.data.environment.id:""))},e=>{})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](l.b),o["\u0275\u0275inject"](i.a),o["\u0275\u0275inject"](c.b),o["\u0275\u0275inject"](m.k),o["\u0275\u0275inject"](d.d),o["\u0275\u0275inject"](s.a))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},LBGr:function(e,t,n){"use strict";n.r(t),n.d(t,"TimetrackingModule",(function(){return v}));var i=n("ofXK"),r=n("tyNb"),a=n("DiK8"),s=n("LFK6"),o=n("kmKP"),l=n("fXoL"),c=n("3Pt+"),m=n("1kSV"),d=n("sYmb");function p(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",3),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](e);const t=l["\u0275\u0275nextContext"](),n=l["\u0275\u0275reference"](6);return t.settingsService.openModal(n)})),l["\u0275\u0275pipe"](1,"translate"),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"translate"),l["\u0275\u0275elementEnd"]()}2&e&&(l["\u0275\u0275propertyInterpolate"]("ngbTooltip",l["\u0275\u0275pipeBind1"](1,2,"updateModuleSettings")),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](3,4,"settings")))}function u(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"form",4),l["\u0275\u0275listener"]("ngSubmit",(function(){l["\u0275\u0275restoreView"](e);const t=l["\u0275\u0275nextContext"]();return t.settingsService.updateSettings(t.settingsForm.value)})),l["\u0275\u0275elementStart"](1,"div",5),l["\u0275\u0275elementStart"](2,"h4",6),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"button",7),l["\u0275\u0275listener"]("click",(function(){return t.$implicit.dismiss("Cross click")})),l["\u0275\u0275elementStart"](6,"span",8),l["\u0275\u0275text"](7,"\xd7"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div",9),l["\u0275\u0275elementStart"](9,"div",10),l["\u0275\u0275elementStart"](10,"label",11),l["\u0275\u0275element"](11,"input",12),l["\u0275\u0275element"](12,"span",13),l["\u0275\u0275elementStart"](13,"span"),l["\u0275\u0275text"](14),l["\u0275\u0275pipe"](15,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"label",11),l["\u0275\u0275element"](17,"input",14),l["\u0275\u0275element"](18,"span",13),l["\u0275\u0275elementStart"](19,"span"),l["\u0275\u0275text"](20),l["\u0275\u0275pipe"](21,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"label",11),l["\u0275\u0275element"](23,"input",15),l["\u0275\u0275element"](24,"span",13),l["\u0275\u0275elementStart"](25,"span"),l["\u0275\u0275text"](26),l["\u0275\u0275pipe"](27,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"label",11),l["\u0275\u0275element"](29,"input",16),l["\u0275\u0275element"](30,"span",13),l["\u0275\u0275elementStart"](31,"span"),l["\u0275\u0275text"](32),l["\u0275\u0275pipe"](33,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](34,"label",11),l["\u0275\u0275element"](35,"input",17),l["\u0275\u0275element"](36,"span",13),l["\u0275\u0275elementStart"](37,"span"),l["\u0275\u0275text"](38),l["\u0275\u0275pipe"](39,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](40,"div",18),l["\u0275\u0275elementStart"](41,"button",19),l["\u0275\u0275listener"]("click",(function(){return t.$implicit.dismiss("Cross click")})),l["\u0275\u0275text"](42),l["\u0275\u0275pipe"](43,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](44,"button",20),l["\u0275\u0275text"](45),l["\u0275\u0275pipe"](46,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("formGroup",e.settingsForm),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](4,9,"moduleSettings")),l["\u0275\u0275advance"](11),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](15,11,"moduleTimetracking")),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](21,13,"newTask")),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](27,15,"tasks")),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](33,17,"history")),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](39,19,"pomodoro")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](43,21,"cancel")),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](46,23,"update"))}}const g=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.settingsService=e,this.userService=t,this.navigationService=n,this.formBuilder=i}ngOnInit(){this.environmentIdSub=this.navigationService.environmentId$.subscribe(e=>{e?(this.showSettings=!0,this.initiateSettings()):this.userService.getUser().subscribe(e=>{e&&e.data&&e.data.environment&&(this.showSettings=!0,this.navigationService.activeEnvironment=e.data.environment,this.initiateSettings())})})}ngOnDestroy(){this.environmentIdSub&&this.environmentIdSub.unsubscribe(),this.moduleSettingsUpdatedSub&&this.moduleSettingsUpdatedSub.unsubscribe()}initiateSettings(){let e=this.navigationService.activeEnvironment;if(!e)return;let t=e.timetracking;this.settingsForm=this.formBuilder.group({module_timetracking:[e.menu_config.timetracking],t_new_task:[t.new_task],t_tasks:[t.tasks],t_history:[t.history],t_pomodoro:[t.pomodoro]})}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](a.a),l["\u0275\u0275directiveInject"](o.a),l["\u0275\u0275directiveInject"](s.a),l["\u0275\u0275directiveInject"](c.FormBuilder))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-timetracking"]],decls:7,vars:4,consts:[[1,"breadcrumb","market-header"],["class","btn btn-rounded btn-primary mr-3 ml-auto","placement","bottom",3,"ngbTooltip","click",4,"ngIf"],["timeTrackSettingsModal",""],["placement","bottom",1,"btn","btn-rounded","btn-primary","mr-3","ml-auto",3,"ngbTooltip","click"],[3,"formGroup","ngSubmit"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"px-5"],[1,"switch","switch-primary","col-12","mb-4"],["type","checkbox","formControlName","module_timetracking"],[1,"slider"],["type","checkbox","formControlName","t_new_task"],["type","checkbox","formControlName","t_tasks"],["type","checkbox","formControlName","t_history"],["type","checkbox","formControlName","t_pomodoro"],[1,"modal-footer"],["type","submit",1,"btn","btn-outline-dark","btn-rounded",3,"click"],["type","submit",1,"btn","btn-outline-primary","btn-rounded"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"h1"),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](4,p,4,6,"button",1),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](5,u,47,25,"ng-template",null,2,l["\u0275\u0275templateRefExtractor"])),2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](3,2,"timeTracking")),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.navigationService.showSettings&&t.showSettings))},directives:[i.p,m.y,c["\u0275angular_packages_forms_forms_y"],c.NgControlStatusGroup,c.FormGroupDirective,c.CheckboxControlValueAccessor,c.NgControlStatus,c.FormControlName],pipes:[d.c],styles:[""]}),e})()}];let h=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.l.forChild(g)],r.l]}),e})(),v=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,h,m.z,d.b,c.ReactiveFormsModule]]}),e})()}}]);